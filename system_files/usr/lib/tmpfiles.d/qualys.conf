# Tmpfiles for Qualys Cloud Agent (bootc immutable OS)
# Runtime directories and agent copy for writable access

# Basic runtime dirs
d /var/log/qualys 0755 root root -
d /var/lib/qualys 0755 root root -
d /var/lib/qualys/cloud-agent 0755 root root -
d /var/cache/qualys 0755 root root -
d /run/qualys 0755 root root -

# Writable agent directory
# The pristine agent is stored at /usr/libexec/qualys/cloud-agent-pristine (immutable)
# We copy it to /var/opt/qualys/cloud-agent at boot for writable access
# /usr/libexec/qualys/cloud-agent is a symlink to /var/opt/qualys/cloud-agent
d /var/opt 0755 root root -
d /var/opt/qualys 0755 root root -

# Copy pristine agent to /var if not already present (preserves state across reboots)
C /var/opt/qualys/cloud-agent 0755 root root - /usr/libexec/qualys/cloud-agent-pristine

